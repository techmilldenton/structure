(function(a){AWEContent.Views.ResponsiveToolbar=AWEContent.Views.Toolbar.extend({id:"responsive-settings",template:_.template('<div class="obj-adjust scroll-bar">                <div class="awe-title"><h2>Responsive settings</h2></div>                <div class="md-section">                    <div class="toggle-enable preview-mode">                        <span>Preview mode</span>                        <div class="togg-status">                            <div class="butt-status"></div>                            <input type="hidden" value="0" name="toggle_value">                        </div>                    </div>                </div>                <div class="md-section">                    <div id="responsive-display" class="md-tab table-size">                        <div class="select-tab">                            <ul class="responsive-devices">                                <li class="awe-responsive-lg"><a title="Desktop - Large display"><i class="ic ac-icon-laptop"></i></a></li>                                <li class="awe-responsive-md"><a title="Tablet"><i class="ic ac-icon-tablet"></i></a></li>                                <li class="awe-responsive-sm"><a title="Tablet horizontal"><i class="ic ac-icon-tablet-hoz"></i></a></li>                                <li class="awe-responsive-xs"><a title="Phone"><i class="ic ac-icon-phone"></i></a></li>                            </ul>                        </div>                        <ul class="md-content-tab root-parent"></ul>                    </div>                </div>            </div>'),templateComponent:_.template('<li class="item-component parent-component toggle-display">                <div class="type-<%= type %> type-component ">                    <div class="options-expand">                        <span class="name-type">                            <span class="name-<%= type %>"> <%= type %> </span>                            <span class="num-<%= type %>"></span>                        </span>                        <span class="expand-childs">                            <i class="ic ac-icon-arrow-right"></i>                        </span>                    </div>                    <% if (hasControls) { %>                        <div class="options-controls">                            <% if (hasReset) { %>                            <span class="reset-default">                                <i class="ic ac-icon-refresh"></i>                            </span>                            <% } %>                            <span class="show-hide">                                <i class="ic ac-icon-eye"></i>                                <input type="hidden" class="is-eye" value="1" data-default="1">                            </span>                        </div>                    <% } %>                </div>                <% if (hasChildren) {%>                    <ul class="parent-component hide"></ul>                <% } %>         </li>'),events:{"click .options-expand":"showComponent","click .show-hide":"showElement","change input.is-eye":"setResponsiveElement","click .reset-default":"resetDefault","mouseenter .options-expand":"connectToView","mouseleave .options-expand":"connectToView"},renderController:function(){return'<a href="#responsive-settings"><i class="ic ac-icon-responsive"></i>Responsive</a>'},render:function(){var c=this;this.$el.append(this.template());this.classScreen="col-lg";this.screen="lgResponsive";var b=setInterval(function(){if(AWEContent.contentIframe!=undefined){clearInterval(b);c.$pageWrapper=AWEContent.$pageWrapper;c.screenDefault()}},50);var d=a(".preview-mode",c.el);d.click(function(){a("> .togg-status",this).toggleClass("active");if(a("> .togg-status",this).hasClass("active")){a("input[name=toggle_value]",a(this)).val(1).trigger("change")}else{a("input[name=toggle_value]",a(this)).val(0).trigger("change")}});a("input[name=toggle_value]",d).change(function(){if(parseInt(a(this).val())){a(this).parent().addClass("active");a(".root-parent",c.el).hide();if(AWEContent.jqIframe!=undefined){AWEContent.jqIframe("body").addClass("awe-preview")}}else{a(this).parent().removeClass("active");a(".root-parent",c.el).show();if(AWEContent.jqIframe!=undefined){AWEContent.jqIframe("body").removeClass("awe-preview")}}}).trigger("change");a(".responsive-devices > li",c.el).click(function(e){a(this).siblings(".ui-tabs-active").removeClass("ui-tabs-active");a(this).addClass("ui-tabs-active");c.detectScreen();c.responsiveIframe();c.reInitPanel()})},afterOpenCallback:function(){var b=this;b.buildResponsive();if(a(".ui-tabs-active",b.el).length){a(".ui-tabs-active",b.el).eq(0).trigger("click")}else{a(".awe-responsive-lg",b.el).trigger("click")}var c=b.$el.closest(".awe-toolbar").find('a[href="#'+b.$el.attr("id")+'"]').parent();c.siblings().addClass("disable")},afterCloseCallback:function(){a(".awe-buildzone").css({width:"",left:""});if(this.$pageWrapper){this.$pageWrapper.removeClass("open-responsive-panel responsive-md responsive-sm responsive-xs")}AWEContent.jqIframe(".hover-responsive").removeClass("hover-responsive")},detectScreen:function(){var c=this,b=c.$pageWrapper,d=a(".ui-tabs-active",c.el);b.removeClass("responsive-lg responsive-md responsive-sm responsive-xs");c.screen="lgResponsive";c.classScreen="col-lg";b.addClass("open-responsive-panel");if(d.hasClass("awe-responsive-lg")){c.screen="lgResponsive";c.classScreen="col-lg";b.addClass("responsive-lg")}else{if(d.hasClass("awe-responsive-md")){c.screen="mediumResponsive";c.classScreen="col-md";b.addClass("responsive-md")}else{if(d.hasClass("awe-responsive-sm")){c.screen="smResponsive";c.classScreen="col-sm";b.addClass("responsive-sm")}else{if(d.hasClass("awe-responsive-xs")){c.screen="xsResponsive";c.classScreen="col-xs";b.addClass("responsive-xs")}}}}setTimeout(function(){c.updateColumnResizeGrid()},1000)},screenDefault:function(){this.$pageWrapper.addClass("responsive-lg").removeClass("open-responsive-panel")},reInitPanel:function(){a("input.is-eye",this.el).trigger("change");this.reInitIframeNewRow()},resetDefault:function(f){var d=this,e=a(f.target).hasClass("reset-default")?a(f.target):a(f.target).closest(".reset-default"),b=e.closest(".parent-component"),c=d.screen;a.each(a(".is-eye",b),function(){var h=a(this).data("element"),g=a(this).data(c+"DF");if(h.get("settings")!=undefined){h=h.get("settings")}if(h.get(c)!=g){h.set(c,g);a(this).trigger("change")}})},connectToView:function(f){var e=this,b=a(f.target).hasClass(".options-expand")?a(f.target):a(f.target).closest(".options-expand"),d=b.next().find(".is-eye"),c=d.data("element"),g=e.getViewFromIframe(c);if(b.hasClass("disable")){b.removeClass("disable");g.removeClass("awe-active")}else{b.addClass("disable");g.addClass("awe-active")}},getViewFromIframe:function(b){return AWEContent.jqIframe(".awe-model-"+b.cid)},responsiveIframe:function(){var c=this.screen,d=a(".awe-buildzone"),g=a(window).width(),e=(g+350)/2,h=e-240,f=e-384,b=e-496;switch(c){case"lgResponsive":d.css({width:"",left:""});break;case"mediumResponsive":d.css({width:"1000px",left:b+"px"});break;case"smResponsive":d.css({width:"780px",left:f+"px"});break;case"xsResponsive":d.css({width:"480px",left:h+"px"});break}},reInitIframeNewRow:function(){AWEContent.sections.each(function(d,c){d.get("columns").at(d.get("columns").length-1).view.autoSetNewRow();d.get("columns").each(function(e,f){b(e,f)})});function b(c,d){if(c.get("hasLayout")){c.get("layout").at(c.get("layout").length-1).view.autoSetNewRow();c.get("layout").each(function(e,f){b(e,f)})}else{c.get("items").each(function(f,e){var g=f.get("machine_name");if(g=="tabs"){f.get("tabs").each(function(i,h){i.get("content").at(i.get("content").length-1).view.autoSetNewRow();i.get("content").each(function(k,j){b(k,j)})})}else{if(g=="accordion"){f.get("accordion").each(function(i,h){i.get("content").at(i.get("content").length-1).view.autoSetNewRow();i.get("content").each(function(k,j){b(k,j)})})}}})}}},updateColumnResizeGrid:function(){AWEContent.$sectionsWrapper.find(".awe-col").each(function(){var d=AWEContent.jqIframe(this),c=d.parent(),b;if(c.parent().hasClass(".content-accor")){c=c.closest(".group")}else{if(c.parent().hasClass("ui-tabs-panel")){c=c.closest(".md-content-tab")}}b=parseInt(c.width()/12);d.resizable("option","grid",[b,b])})},buildResponsive:function(){var b=this,c=a(".root-parent",b.el);c.empty();AWEContent.sections.each(function(i,h){var g=a(b.templateComponent({type:"section",hasChildren:true,hasControls:true,hasReset:true})).addClass("parent-1"),e=i.toJSON().settings,f=a(".parent-component",g);a(".name-section",g).html("Section");a(".num-section",g).html(h+1);c.append(g);a(".show-hide input",g).data({element:i,lgResponsiveDF:e.lgResponsive,mediumResponsiveDF:e.mediumResponsive,smResponsiveDF:e.smResponsive,xsResponsiveDF:e.xsResponsive}).attr("data-cid",i.cid);i.get("columns").each(function(k,j){d(k,j,f)});function d(m,k,o){var n=a(b.templateComponent({type:"column",hasChildren:true,hasControls:true,hasReset:false})).addClass("parent-2"),l=m.toJSON().settings,j=a(".parent-component",n);a(".name-column",n).html("Column");a(".num-column",n).html(k+1);a(".show-hide input",n).data({element:m,lgResponsiveDF:l.lgResponsive,mediumResponsiveDF:l.mediumResponsive,smResponsiveDF:l.smResponsive,xsResponsiveDF:l.xsResponsive}).attr("data-cid",m.cid);o.append(n);if(m.get("hasLayout")){var p=a('<div class="parent-layout type-layout"></div>');o.addClass("column-has-layout").append(p);m.get("layout").each(function(r,q){d(r,q,p)})}else{if(!m.get("items").length){a(">.type-component > .options-expand >.expand-childs",n).addClass("visibility-hidden");j.remove()}else{m.get("items").each(function(t,s){var q=a(b.templateComponent({type:"item",hasChildren:false,hasControls:true,hasReset:false})),r=t.toJSON(),u=t.get("machine_name");a(">.type-component > .options-expand >.expand-childs",q).addClass("visibility-hidden");a(".show-hide input",q).data({element:t,lgResponsiveDF:r.lgResponsive,mediumResponsiveDF:r.mediumResponsive,smResponsiveDF:r.smResponsive,xsResponsiveDF:r.xsResponsive}).attr("data-cid",t.cid);a(".name-item",q).html(u);a(".num-item",q).html(s+1);j.append(q);if(u=="tabs"){a(".expand-childs",q).removeClass("visibility-hidden");var v=a('<ul class="parent-component hide item-child-column"></ul>');q.addClass("item-extend").append(v);t.get("tabs").each(function(x,w){var z=a(b.templateComponent({type:"tabs",hasChildren:true,hasControls:false,hasReset:false})),y=a("> .parent-component",z);a(".name-tabs",z).html("Tab Children");a(".num-tabs",z).html(w+1);v.append(z);x.get("content").each(function(B,A){d(B,A,y)})})}else{if(u=="accordion"){a(".expand-childs",q).removeClass("visibility-hidden");var v=a('<div class="parent-component hide item-child-column"></div>');q.addClass("item-extend").append(v);t.get("accordion").each(function(w,x){var y=a(b.templateComponent({type:"accordion",hasChildren:true,hasControls:false})),z=a("> .parent-component",y);a(".name-accordion",y).html("Accordion Children");a(".num-accordion",y).html(x+1);v.append(y);w.get("content").each(function(B,A){d(B,A,z)})})}}})}}}})},showComponent:function(e){var d=a(e.target).closest(".type-component"),c=a(".expand-childs i",d),b=d.nextAll(".parent-component");b.toggleClass("hide");if(!c.parent().hasClass("visibility-hidden")){c.hasClass("ac-icon-arrow-right")?c.removeClass("ac-icon-arrow-right").addClass("ac-icon-arrow-down"):c.removeClass("ac-icon-arrow-down").addClass("ac-icon-arrow-right")}},showElement:function(g){var e=this,b=a(g.target).hasClass("show-hide")?a(g.target):a(g.target).closest(".show-hide"),d=a("input",b),c=e.screen,f=d.data("element");if(f.get("settings")!=undefined){f=f.get("settings")}b.hasClass("disable")?f.set(c,true):f.set(c,false);d.trigger("change")},setResponsiveElement:function(g){var e=this,d=e.screen,c=a(g.target),h=c.parent(),i=h.parent().prev().children(".expand-childs"),b=h.parent().parent().next(),f=c.data("element");if(f.get("settings")!=undefined){f=f.get("settings")}if(f.get(d)){h.removeClass("disable");b.css("display","");i.css({visibility:"",opacity:""})}else{h.addClass("disable");b.css("display","none");i.css({visibility:"hidden",opacity:0})}}});a(document).ready(function(){AWEContent.Toolbars.responsive=new AWEContent.Views.ResponsiveToolbar()})})(jQuery);