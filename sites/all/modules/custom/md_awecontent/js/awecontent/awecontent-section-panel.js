(function(a){AWEContent.Views.SectionPanel=AWEContent.Views.DefaultPanel.extend({className:"awe-obj-panel section-panel",panelName:"section",initPanel:function(){AWEContent.Views.DefaultPanel.prototype.initPanel.call(this);var b=this;a("#text-section-custom-id",this.el).change(function(){b.editingModel.get("settings").set("customID",a(this).val())});a("#text-section-custom-classes",this.el).change(function(){b.editingModel.get("settings").set("customClass",a(this).val())});a("#section-custom-attributes input[name=enabled_custom_attributes]",this.el).change(function(d,c){if(!c){b.editingModel.get("settings").set("customEnableAttributes",parseInt(a(this).val()))}});a("#section-custom-attributes input[name=attributes_data]",this.el).change(function(c,d){b.editingModel.get("settings").set("customDataAttributes",a(this).val(),d)});a("#section-full-section input[name=toggle_value]",this.el).change(function(d,c){if(!c){b.editingModel.get("settings").set("enabledFullScreen",parseInt(a(this).val()))}});a("#section-fluid-section input[name=toggle_value]",this.el).change(function(d,c){if(!c){b.editingModel.get("settings").set("enabledFluid",parseInt(a(this).val()))}});a("#section-equal-row input[name=toggle_value]",this.el).change(function(d,c){if(!c){b.editingModel.get("settings").set("equalRowHeight",parseInt(a(this).val()))}});a("#section-row-spacing",this.el).change(function(d,c){if(c.value==-1){a(".frame-display .display-font",a(this)).text("DF")}b.editingModel.get("settings").set("rowSpacing",c.value)});a("#section-background-color",this.el).change(function(d,c){if(c){c=c.toRgbString()}else{c=""}b.editingModel.get("settings").set("bgColor",c)});a("#section-background-image input",this.el).change(function(f,d){var g=a(this).val().trim(),e=g?JSON.parse(g):false,c=e&&e.file_url!==undefined?e.file_url:"",h=e&&e.fid!==undefined?e.fid:-1;if(h<0){a(this).parent().next().hide();a(this).closest(".toggle-pull").nextAll().hide()}else{a("#section-background-mode",b.el).show().trigger("change",{value:b.editingModel.get("settings").get("bgMode")})}if(!d){b.editingModel.bgImageURL=c;b.editingModel.get("settings").set("bgFid",h)}});a("#section-background-mode",b.el).change(function(f,d){var c=d.value,e=a(this).closest(".toggle-drop");if(c=="fullcover"){a("#section-parallax-scrolling, #section-background-position",b.$el).hide()}else{if(c=="parallax"){a("#section-background-position",b.$el).hide();a("#section-parallax-scrolling",b.$el).show()}else{a("#section-background-position",b.$el).show();a("#section-parallax-scrolling",b.$el).hide()}}b.editingModel.get("settings").set("bgMode",c)});a("#section-background-position",b.el).change(function(d,c){b.editingModel.get("settings").set("bgPosition",c.value)});a("#section-parallax-scrolling input",b.el).change(function(d,c){if(!c){b.editingModel.get("settings").set("enableScrolling",parseInt(a(this).val()))}});a("#section-background-image",b.el).append('<div class="wanted-image" style="display: none">Video background does not play on mobile, background image will be used as fallback</div>');a("#section-enable-video-background input[name=toggle_value]",this.el).change(function(e,d){var c=parseInt(a(this).val()),f=a("#section-background-image input",b.el),g=a("#section-enable-video-background",b.el);f.trigger("change",{isPanel:true});if(!c){g.nextAll().hide()}else{g.nextAll().show()}if(!d){if(c){a(".wanted-image",b.el).show();setTimeout(function(){a(".wanted-image",b.el).hide()},5000)}else{a(".wanted-image",b.el).hide()}if(c){a("wanted-image").show()}b.editingModel.get("settings").set("enableBackgroundVideo",c)}});a("#section-video-url > input",this.el).change(function(){b.editingModel.get("settings").set("bgVideoUrl",a(this).val())});a("#section-auto-play-video input[name=toggle_value]",this.el).change(function(d,c){if(!c){b.editingModel.get("settings").set("enableAutoPlayVideo",parseInt(a(this).val()))}});a("#section-show-video-controllers input[name=toggle_value]",this.el).change(function(d,c){if(!c){b.editingModel.get("settings").set("enableShowButton",parseInt(a(this).val()))}});a("#section-mute-video input[name=toggle_value]",this.el).change(function(d,c){if(!c){b.editingModel.get("settings").set("enableMute",parseInt(a(this).val()))}});a("#section-background-enable-overlay input[name=toggle_value]",this.el).change(function(e,d){var c=parseInt(a(this).val());if(c){a("#section-overlay-color",b.el).show()}else{a("#section-overlay-color",b.el).hide()}if(!d){b.editingModel.get("settings").set("enabledBgOverlay",c)}});a("#section-overlay-color",this.el).change(function(d,c){if(c){c=c.toRgbString()}else{c=""}b.editingModel.get("settings").set("bgOverlayColor",c)});a("#section-box-model-settings",this.el).initBoxModelPanel(this,"boxModelSettings")},setPanelElementsValue:function(){var b=this,d=this.editingModel.get("settings").toJSON(),c=d.bgFid?{fid:d.bgFid}:{fid:-1};a("#text-section-custom-id",this.el).val(d.customID);a("#text-section-custom-classes",this.el).val(d.customClass);a("#section-custom-attributes input[name=enabled_custom_attributes]",this.el).val(d.customEnableAttributes).trigger("change",true);a("#section-custom-attributes input[name=attributes_data]",this.el).val(d.customEnableAttributes);a("#section-full-section input[name=toggle_value]",this.el).val(d.enabledFullScreen).trigger("change",true);if(AWEContent.module&&AWEContent.module==="block_painter"){a("#section-full-section",this.el).hide()}(AWEContent.alwaysFluid)?a("#section-fluid-section",this.el).hide():a("#section-fluid-section",this.el).show();a("#section-fluid-section input[name=toggle_value]",this.el).val(d.enabledFluid).trigger("change",true);a("#section-equal-row input[name=toggle_value]",this.el).val(d.equalRowHeight).trigger("change",true);a("#section-row-spacing",b.el).aweSlider("value",d.rowSpacing);a("#section-background-color",this.el).aweColorPicker("value",d.bgColor);a("#section-background-image .img-bg",this.el).css("background-image","url("+encodeURI(this.editingModel.bgImageURL)+")");a("#section-background-image input",this.el).val(JSON.stringify(c)).trigger("change",true);a("#section-background-mode",this.el).aweSelect("value",d.bgMode);a("#section-background-position",this.el).aweSelect("value",d.bgPosition);a("#section-parallax-scrolling input",this.el).val(d.enableScrolling).trigger("change",true);a("#text-section-video-url",this.el).val(d.bgVideoUrl);a("#section-enable-video-background input[name=toggle_value]",this.el).val(d.enableBackgroundVideo).trigger("change",true);a("#section-auto-play-video input[name=toggle_value]",this.el).val(d.enableAutoPlayVideo).trigger("change",true);a("#section-show-video-controllers input[name=toggle_value]",this.el).val(d.enableShowButton).trigger("change",true);a("#section-mute-video input[name=toggle_value]",this.el).val(d.enableMute).trigger("change",true);a("#section-background-enable-overlay input[name=toggle_value]",this.el).val(d.enabledBgOverlay).trigger("change",true);a("#section-overlay-color",this.el).aweColorPicker("value",d.bgOverlayColor);a("#section-box-model-settings",this.el).initBoxModel(d.boxModelSettings)},buildPanel:function(){return{title:{type:"markup",markup:'<div class="awe-title"><h2>Custom section</h2></div>'},custom_definitions:{type:"section",custom_id:{type:"text_field",title:"ID",attributes:{placeholder:"Custom ID"},default_value:""},custom_classes:{type:"text_field",title:"Classes",attributes:{placeholder:"Custom classes"},default_value:""},custom_attributes:{type:"custom_attributes"},full_section:{type:"toggle",title:"Fullscreen section",default_value:0},fluid_section:{type:"toggle",title:"Fluid section",default_value:0},equal_row:{type:"toggle",title:"Equal row height",default_value:0},row_spacing:{type:"slider",title:"Row Spacing",min_value:-1,max_value:100,default_value:0,allow_type:true,unit:"px"}},custom_appearances:{type:"section",background_color:{type:"colorpicker",title:"Background color",options:{preferredFormat:"rgb",AlphaVerticle:true,showAlpha:true,allowEmpty:true,showInput:true}},background_image:{type:"media",title:"Background image"},background_mode:{type:"select",title:"Mode",options:{repeat:"Repeat All","repeat-x":"Repeat Horizontally","repeat-y":"Repeat Vertically","no-repeat":"No Repeat",fullcover:"FullCover",parallax:"Parallax"},default_value:"repeat"},background_position:{type:"select",title:"Position",options:{"left top":"Left Top","left center":"Left Center","left bottom":"Left Bottom","right top":"Right Top","right center":"Right Center","right bottom":"Right Bottom","center top":"Center Top","center center":"Center center","center bottom":"Center Bottom",initial:"Initial",inherit:"Inherit"},default_value:"left top"},parallax_scrolling:{type:"toggle",title:"Parallax scrolling",default_value:0}},background_video:{type:"section",enable_video_background:{type:"toggle",title:"Background video",default_value:0},video_url:{type:"text_field",title:"URL"},video_upload:{type:"video_uploader"},auto_play_video:{type:"toggle",title:"Auto play video",default_value:0},show_video_controllers:{type:"toggle",title:"Show play/pause button",default_value:0},mute_video:{type:"toggle",title:"Mute video",default_value:0}},background_overlay:{type:"section",background_enable_overlay:{type:"toggle",title:"Enable background overlay",default_value:0},overlay_color:{type:"colorpicker",title:"Overlay color",options:{preferredFormat:"rgb",AlphaVerticle:true,showAlpha:true,allowEmpty:true,showInput:true}}},custom_box_model:{type:"section",box_model_settings:{type:"tabs",tabs:[{tab_title:"Border",contents:{custom_border:{type:"box_border",min_value:0,max_value:100,default_value:0}}},{tab_title:"Padding",contents:{custom_padding:{type:"box_model",model_type:"padding",allow_type:true,min_value:0,max_value:100,default_value:0}}},{tab_title:"Margin",contents:{custom_margin:{type:"box_model",model_type:"margin",allow_type:true,min_value:0,max_value:100,default_value:0}}}]}}}}})})(jQuery);