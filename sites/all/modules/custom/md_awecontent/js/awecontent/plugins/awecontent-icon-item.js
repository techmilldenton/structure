(function(a){AWEContent.Models.IconItem=AWEContent.Models.Item.extend({defaults:{machine_name:"icon",nameIcon:"ic ac-icon-help",fontSize:-1,lineHeight:-1,styleIcon:"icon-plain",iconAlign:"awe-icon-left",color:"",backgroundColor:"",hoverColor:"",hoverBackgroundColor:"",iconLink:"",boxModelSettings:{},customID:"",customClass:"",customEnableAttributes:0,customDataAttributes:"[] ",customActionAttributes:'{"newAction": "", "newAttrName": "", "newAttrValue": ""}',customEnableAnimations:0,customDataAnimations:'{"type" : "none"}',lgResponsive:true,xsResponsive:true,mediumResponsive:true,smResponsive:true},createView:function(){this.view=new AWEContent.Views.IconItem({model:this})},relations:[{type:Backbone.HasOne,key:"boxModelSettings",relatedModel:AWEContent.Models.BoxModelSettings}],clone:function(){var b={};a.each(this.toJSON(),function(c,d){b[c]=d});b.boxModelSettings=new AWEContent.Models.BoxModelSettings(b.boxModelSettings);return new AWEContent.Models.IconItem(b)}});AWEContent.Views.IconItem=AWEContent.Views.Item.extend({initialize:function(){AWEContent.Views.Item.prototype.initialize.call(this);this.listenTo(this.model.get("boxModelSettings"),"change",this.applySettingsChanged)},itemTemplate:_.template('<div class="awe-item awe-icon">                <style></style>                <% if (iconLink) { %>                <a class="" href="<%= iconLink %>" target="_blank">                <% } %>                    <div class="awe-icon-container"><i class="<%= iconClasses %>"></i></div>                <% if (iconLink) { %>                </a>                <% } %>            </div>'),itemStyle:_.template(".<%= itemClass %>.awe-icon .awe-icon-container {\n                color: <%= color %>;\n                background-color: <%= bgColor %>;\n            }\n            .<%= itemClass %>.awe-icon .awe-icon-container:hover {\n                color: <%= hoverColor %>;\n                background-color: <%= hoverBgColor %>;\n            }\n"),renderItemContent:function(){var d=this,e=d.model.toJSON(),b=a(this.itemTemplate({iconLink:e.iconLink,iconClasses:e.nameIcon})),c=a("style",b);d.itemClass="awe-icon-"+this.cid;b.addClass(d.itemClass).css({"font-size":e.fontSize==-1?"":(e.fontSize+"px"),"line-height":e.lineHeight==-1?"":(e.lineHeight+"px")}).renderItemDefaultBoxModel(e.boxModelSettings);b.addClass(e.styleIcon);c.html(this.itemStyle({itemClass:this.itemClass,color:e.color,bgColor:e.backgroundColor,hoverColor:e.hoverColor,hoverBgColor:e.hoverBackgroundColor}));b.addClass(e.customClass).attr("id",e.customID);b.renderItemDefaultAttributes(e.customEnableAttributes,e.customDataAttributes);if(e.customEnableAnimations){b.processAnimations(e.customDataAnimations)}d.$el.defaultResponsive(e);b.addClass(e.iconAlign);return b},applySettingsChanged:function(e){var d=this,b=a(".awe-icon",d.el),h=a("i",b),c=a("style",b),f=e.toJSON(),g=d.$el.height();a.each(e.changedAttributes(),function(l,o){d.$el.changeResponsive(l,o);b.renderChangeSettingBoxModel(l,o,e);switch(l){case"nameIcon":var j=d.model.previousAttributes().nameIcon;h.removeClass(j).addClass(o);break;case"fontSize":o==-1?b.css("fontSize",""):b.css("fontSize",o+"px");break;case"lineHeight":o==-1?b.css("line-height",""):b.css("line-height",o+"px");break;case"styleIcon":var m=d.model.previousAttributes().styleIcon;b.removeClass(m).addClass(o);break;case"iconAlign":var i=d.model.previousAttributes().iconAlign;b.removeClass(i).addClass(o);break;case"color":case"backgroundColor":case"hoverColor":case"hoverBackgroundColor":d.generateStyle();break;case"iconLink":b.remove();d.$el.append(d.renderItemContent());break;case"customID":b.attr("id",o);break;case"customClass":var p=d.model.previousAttributes().customClass;b.removeClass(p).addClass(o);break;case"customEnableAttributes":b.renderChangeSettingsAttributes(l,o,f.customDataAttributes);break;case"customActionAttributes":b.renderChangeSettingsAttributes(l,o);break;case"customEnableAnimations":var n,k;if(o){n=f.customDataAnimations;k=null;b.processAnimations(n)}else{n=null;k=f.customDataAnimations;b.processAnimations(n,k)}break;case"customDataAnimations":b.processAnimations(f.customDataAnimations,d.model.previousAttributes().customDataAnimations);break}});setTimeout(function(){d.checkChangeHeight(g)},50)},generateStyle:function(){var b=this,d="",c=this.model.toJSON();if(b.updateColor){clearTimeout(b.updateColor)}b.updateColor=setTimeout(function(){var e=b.itemStyle({itemClass:b.itemClass,color:c.color,bgColor:c.backgroundColor,hoverColor:c.hoverColor,hoverBgColor:c.hoverBackgroundColor});a("style",b.el).html(e);b.updateColor=false},100)}});AWEContent.Views.IconItemController=AWEContent.Views.ItemController.extend({machineName:"icon",controllerHtml:function(){return'<div class="title-icon">Font Icon</div><i class="ic ac-icon-icon"><span>Icon</span></i>'},createItemModel:function(b){var c;if(b!=undefined){c=new AWEContent.Models.BoxModelSettings(b.boxModelSettings);b.boxModelSettings=c;return new AWEContent.Models.IconItem(b)}return new AWEContent.Models.IconItem({boxModelSettings:new AWEContent.Models.BoxModelSettings()})}});AWEContent.Views.IconPanel=AWEContent.Views.ItemPanel.extend({tagName:"div",className:"awe-obj-panel panel-icon",panelName:"icon",initPanel:function(){AWEContent.Views.ItemPanel.prototype.initPanel.call(this);var b=this;a("#custom-choose-icons .title-tab",b.el).click(function(){var c=a(this).closest("#custom-choose-icons");AWEContent.Panels.listIconPanel.processIcon(c)});a("#custom-choose-icons",b.el).change(function(c,d){if(d){b.editingModel.set("nameIcon",d.nameIcon);a(".title-tab > i",this).removeClass().addClass(d.nameIcon)}});a("#icon-custom-size",b.el).change(function(d,c){b.editingModel.set("fontSize",c.value);if(c.value==-1){a(".display-font",a(this)).text("DF")}});a("#icon-custom-line-height",b.el).change(function(d,c){b.editingModel.set("lineHeight",c.value);if(c.value==-1){a(".display-font",a(this)).text("DF")}});a("#icon-custom-style",b.el).change(function(d,c){b.editingModel.set("styleIcon",c.value)});a("#icon-custom-align",b.el).change(function(d,c){b.editingModel.set("iconAlign",c.value)});a("#icon-custom-color",b.el).change(function(d,c){if(c){c=c.toRgbString()}else{c=""}b.editingModel.set("color",c)});a("#icon-custom-background",b.el).change(function(d,c){if(c){c=c.toRgbString()}else{c=""}b.editingModel.set("backgroundColor",c)});a("#icon-custom-hover",b.el).change(function(d,c){if(c){c=c.toRgbString()}else{c=""}b.editingModel.set("hoverColor",c)});a("#icon-custom-hover-background",b.el).change(function(d,c){if(c){c=c.toRgbString()}else{c=""}b.editingModel.set("hoverBackgroundColor",c)});a("#text-icon-custom-link",b.el).change(function(){b.editingModel.set("iconLink",a(this).val())});a("#icon-column-box-model",b.el).initBoxModelPanel(b,"boxModelSettings");a("#text-icon-custom-id",b.el).change(function(){b.editingModel.set("customID",a(this).val())});a("#text-icon-custom-css",b.el).change(function(){b.editingModel.set("customClass",a(this).val())});a("#icon-custom-attributes",this.el).initAttributesPanel(b);a("#icon-animations",this.el).change(function(c,d){b.editingModel.set("customEnableAnimations",d.enabled);if(d){b.editingModel.set("customDataAnimations",d.animations)}})},setPanelElementsValue:function(){var b=this,c=this.editingModel.toJSON();a("#custom-choose-icons",b.el).attr("data-name-icon",c.nameIcon);a("#custom-choose-icons i",b.el).removeClass().addClass(c.nameIcon);a("#icon-custom-size",b.el).aweSlider("value",c.fontSize);a("#icon-custom-line-height",b.el).aweSlider("value",c.lineHeight);a("#icon-custom-style",b.el).aweSelect("value",c.styleIcon);a("#icon-custom-align",b.el).aweSelect("value",c.iconAlign);a("#icon-custom-color",b.el).aweColorPicker("value",c.color);a("#icon-custom-background",b.el).aweColorPicker("value",c.backgroundColor);a("#icon-custom-hover",b.el).aweColorPicker("value",c.hoverColor);a("#icon-custom-hover-background",b.el).aweColorPicker("value",c.hoverBackgroundColor);a("#text-icon-custom-link",b.el).val(c.iconLink);a("#icon-column-box-model",b.el).initBoxModel(c.boxModelSettings);a("#text-icon-custom-id",b.el).val(c.customID);a("#text-icon-custom-css",b.el).val(c.customClass);a("#icon-custom-attributes",this.el).initAttributes(c.customEnableAttributes,c.customDataAttributes);a("#icon-animations",this.el).aweAnimation("value",{enabled:c.customEnableAnimations,animations:c.customDataAnimations,previewEl:b.editingModel.view.$el})},buildPanel:function(){return{title:{type:"markup",markup:"<div><h2>Icon</h2></div>"},custom_definitions:{type:"section",custom_choose_icons:{type:"tabs_icon",title:'<div class="title-tab"><span>Choose Icons</span><i class=""></i></div>',tabs:[]},custom_size:{type:"slider",title:"Font Size",min_value:-1,unit:"px",max_value:100,default_value:100,allow_type:true},custom_line_height:{type:"slider",title:"Line Spacing",unit:"px",min_value:-1,max_value:100,default_value:100,allow_type:true},custom_style:{type:"select",title:"Style",options:{"awe-icon-plain":"Plain","awe-icon-circle":"Circle","awe-icon-square":"Square"},default_value:"awe-icon-plain"},custom_align:{type:"select",title:"Align",options:{"awe-icon-left":"Left","awe-icon-center":"Center","awe-icon-right":"Right"},default_value:"awe-icon-left"},custom_color:{type:"colorpicker",title:"Color",options:{preferredFormat:"rgb",AlphaVerticle:true,showAlpha:true,allowEmpty:true,showInput:true}},custom_background:{type:"colorpicker",title:"Background",options:{preferredFormat:"rgb",AlphaVerticle:true,showAlpha:true,allowEmpty:true,showInput:true}},custom_hover:{type:"colorpicker",title:"Hover color",options:{preferredFormat:"rgb",AlphaVerticle:true,showAlpha:true,allowEmpty:true,showInput:true}},custom_hover_background:{type:"colorpicker",title:"Hover background",options:{preferredFormat:"rgb",AlphaVerticle:true,showAlpha:true,allowEmpty:true,showInput:true}},custom_link:{type:"text_field",title:"Link",attributes:{placeholder:"http://..."},default_value:""}},custom_box_model:{type:"section",column_box_model:{type:"tabs",tabs:[{tab_title:"Border",contents:{custom_border:{type:"box_border",min_value:0,max_value:100,default_value:0}}},{tab_title:"Radius",contents:{custom_border_radius:{type:"box_model",model_type:"border_radius",allow_type:true,min_value:0,max_value:100,default_value:0}}},{tab_title:"Padding",contents:{custom_padding:{type:"box_model",model_type:"padding",allow_type:true,min_value:0,max_value:100,default_value:0}}},{tab_title:"Margin",contents:{custom_margin:{type:"box_model",model_type:"margin",allow_type:true,min_value:0,max_value:100,default_value:0}}}]}},custom_style:{type:"section",custom_id:{type:"text_field",title:"ID",attributes:{placeholder:"Custom ID"},default_value:""},custom_css:{type:"text_field",title:"Class",attributes:{placeholder:"wrapper"},default_value:""},custom_attributes:{type:"custom_attributes"},animations:{type:"animations"}}}}});a(document).ready(function(){AWEContent.Controllers.icon=new AWEContent.Views.IconItemController();AWEContent.Panels.icon=new AWEContent.Views.IconPanel()})})(jQuery);