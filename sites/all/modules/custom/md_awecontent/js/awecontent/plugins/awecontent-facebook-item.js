(function(a){AWEContent.Models.FacebookItem=AWEContent.Models.Item.extend({defaults:{machine_name:"facebook",facebookUrl:"https://www.facebook.com/megadrupal?fref=ts",width:"300",height:"300",colorScheme:"dark",friendsFaces:0,header:0,posts:0,border:0,boxModelSettings:{},customID:"",customClass:"",customEnableAttributes:0,customDataAttributes:"[] ",customActionAttributes:'{"newAction": "", "newAttrName": "", "newAttrValue": ""}',customEnableAnimations:0,customDataAnimations:'{"type" : "none"}',lgResponsive:true,xsResponsive:true,mediumResponsive:true,smResponsive:true},relations:[{type:Backbone.HasOne,key:"boxModelSettings",relatedModel:AWEContent.Models.BoxModelSettings}],createView:function(){this.view=new AWEContent.Views.FacebookItem({model:this})},clone:function(){var b={};a.each(this.toJSON(),function(c,d){b[c]=d});b.boxModelSettings=new AWEContent.Models.BoxModelSettings(b.boxModelSettings);return new AWEContent.Models.FacebookItem(b)}});AWEContent.Views.FacebookItem=AWEContent.Views.Item.extend({additionalEvents:{},initialize:function(){AWEContent.Views.Item.prototype.initialize.call(this);this.listenTo(this.model.get("boxModelSettings"),"change",this.applySettingsChanged)},renderItemContent:function(){var b=this,c=b.model.toJSON(),e=a('<iframe class="awe-item awe-facebook" src=""></iframe>');e.attr("src",b.processFacebook()).css({width:c.width==-1?"":(c.width+"px"),height:c.height==-1?"":(c.height+"px")}).attr("id",c.customID).addClass(c.customClass);e.renderItemDefaultBoxModel(c.boxModelSettings);e.renderItemDefaultAttributes(c.customEnableAttributes,c.customDataAttributes);if(c.customEnableAnimations){var d=c.customDataAnimations;e.processAnimations(d)}b.$el.defaultResponsive(c);return e},applySettingsChanged:function(c){var b=this,f=a(".awe-facebook",b.el),d=b.model.toJSON(),e=b.$el.height();a.each(c.changedAttributes(),function(h,j){b.$el.changeResponsive(h,j);f.renderChangeSettingBoxModel(h,j,c);switch(h){case"facebookUrl":case"colorScheme":case"friendsFaces":case"header":case"posts":case"border":f.attr("src",b.processFacebook());break;case"width":j==-1?f.css("width",""):f.css("width",j+"px");f.attr("src",b.processFacebook());break;case"height":j==-1?f.css("height",""):f.css("height",j+"px");f.attr("src",b.processFacebook());break;case"customID":f.attr("id",j);break;case"customClass":var k=b.model.previousAttributes().customClass;f.removeClass(k).addClass(j);break;case"customEnableAttributes":f.renderChangeSettingsAttributes(h,j,d.customDataAttributes);break;case"customActionAttributes":f.renderChangeSettingsAttributes(h,j);break;case"customEnableAnimations":var i,g;if(j){i=d.customDataAnimations;g=null;f.processAnimations(i)}else{i=null;g=d.customDataAnimations;f.processAnimations(i,g)}break;case"customDataAnimations":var i,g;i=d.customDataAnimations;g=b.model.previousAttributes().customDataAnimations;f.processAnimations(i,g);break}});setTimeout(function(){b.checkChangeHeight(e)},50)},processFacebook:function(){var b=this,c=b.model.toJSON(),d="";if(c.facebookUrl!=""){d+="//www.facebook.com/plugins/likebox.php?href=";d+=c.facebookUrl;d+="&colorscheme="+c.colorScheme;d+=c.friendsFaces?"&show_faces=true":"&show_faces=false";d+=c.header?"&header=true":"&header=false";d+=c.posts?"&stream=true":"&stream=false";d+=c.border?"&show_border=true":"&show_border=false";d+=c.width!=-1?"&width="+c.width:"";d+=c.height!=-1?"&height="+c.height:""}return d}});AWEContent.Views.FacebookItemController=AWEContent.Views.ItemController.extend({machineName:"facebook",controllerHtml:function(){return'<div class="title-icon">Facebook like box</div><i class="ic ac-icon-facebook"></i>'},createItemModel:function(b){var c;if(b!=undefined){c=new AWEContent.Models.BoxModelSettings(b.boxModelSettings);b.boxModelSettings=c;return new AWEContent.Models.FacebookItem(b)}return new AWEContent.Models.FacebookItem({boxModelSettings:new AWEContent.Models.BoxModelSettings()})}});AWEContent.Views.FacebookPanel=AWEContent.Views.ItemPanel.extend({tagName:"div",className:"awe-obj-panel facebook-panel",panelName:"facebook",initPanel:function(){AWEContent.Views.ItemPanel.prototype.initPanel.call(this);var b=this;a("#text-facebook-custom-url",b.el).change(function(){b.editingModel.set("facebookUrl",a(this).val())});a("#facebook-width",b.el).change(function(d,c){b.editingModel.set("width",c.value);if(c.value==-1){a(".display-font",a(this)).text("DF")}});a("#facebook-height",b.el).change(function(d,c){b.editingModel.set("height",c.value);if(c.value==-1){a(".display-font",a(this)).text("DF")}});a("#facebook-scheme-dark",b.el).change(function(d,c){b.editingModel.set("colorScheme",c.value)});a("#facebook-friend input",b.el).change(function(d,c){if(!c){b.editingModel.set("friendsFaces",parseInt(a(this).val()))}});a("#facebook-header input",b.el).change(function(d,c){if(!c){b.editingModel.set("header",parseInt(a(this).val()))}});a("#facebook-posts input",b.el).change(function(d,c){if(!c){b.editingModel.set("posts",parseInt(a(this).val()))}});a("#facebook-border input",b.el).change(function(d,c){if(!c){b.editingModel.set("border",parseInt(a(this).val()))}});a("#facebook-layout-tab",b.el).initBoxModelPanel(b,"boxModelSettings");a("#text-facebook-custom-id",this.el).change(function(){b.editingModel.set("customID",a(this).val())});a("#text-facebook-custom-classes",this.el).change(function(){b.editingModel.set("customClass",a(this).val())});a("#facebook-custom-attributes",this.el).initAttributesPanel(b);a("#facebook-animations",this.el).change(function(c,d){b.editingModel.set("customEnableAnimations",d.enabled);if(d){b.editingModel.set("customDataAnimations",d.animations)}})},setPanelElementsValue:function(){var b=this,c=this.editingModel.toJSON();a("#text-facebook-custom-url",b.el).val(c.facebookUrl);a("#facebook-width",b.el).aweSlider("value",c.width);a("#facebook-height",b.el).aweSlider("value",c.height);a("#facebook-scheme-dark",b.el).aweSelect("value",c.colorScheme);a("#facebook-friend input",b.el).val(c.friendsFaces).trigger("change",{isPanel:true});a("#facebook-header input",b.el).val(c.header).trigger("change",{isPanel:true});a("#facebook-posts input",b.el).val(c.posts).trigger("change",{isPanel:true});a("#facebook-border input",b.el).val(c.border).trigger("change",{isPanel:true});a("#facebook-layout-tab",b.el).initBoxModel(c.boxModelSettings);a("#text-facebook-custom-id",b.el).val(c.customID);a("#text-facebook-custom-classes",b.el).val(c.customClass);a("#facebook-custom-attributes",this.el).initAttributes(c.customEnableAttributes,c.customDataAttributes);a("#facebook-animations",this.el).aweAnimation("value",{enabled:c.customEnableAnimations,animations:c.customDataAnimations,previewEl:b.editingModel.view.$el})},buildPanel:function(){return{title:{type:"markup",markup:'<div class="awe-title"><h2>Facebook</h2></div>'},custom_type:{type:"section",custom_url:{type:"text_field",title:"URL",attributes:{placeholder:"paste url here"},default_value:""}},box_size:{type:"section",width:{type:"slider",title:"Width",min_value:-1,max_value:1000,default_value:500,allow_type:true,unit:"px"},height:{type:"slider",title:"Height",min_value:-1,max_value:1000,default_value:500,allow_type:true,unit:"px"}},news_feed:{type:"section",scheme_dark:{type:"select",title:"Color Scheme",options:{dark:"Dark",light:"Light"},default_value:"dark"},friend:{type:"toggle",title:"Friends'faces",default_value:0},header:{type:"toggle",title:"Header",default_value:0},posts:{type:"toggle",title:"Posts",default_value:0},border:{type:"toggle",title:"Border",default_value:0}},box_settings:{type:"section",layout_tab:{type:"tabs",tabs:[{tab_title:"Border",contents:{header_border:{type:"box_border",min_value:0,max_value:100,default_value:0}}},{tab_title:"Radius",contents:{header_boder_radius:{type:"box_model",model_type:"border_radius",min_value:0,max_value:100,allow_type:true}}},{tab_title:"Padding",contents:{header_padding:{type:"box_model",model_type:"padding",allow_type:true,min_value:0,max_value:100}}},{tab_title:"Margin",contents:{header_margin:{type:"box_model",model_type:"margin",allow_type:true,min_value:0,max_value:100}}}]}},definitions:{type:"section",custom_id:{type:"text_field",title:"ID",default_value:"ID"},custom_classes:{type:"text_field",title:"Classes",default_value:"className"},custom_attributes:{type:"custom_attributes"},animations:{type:"animations"}}}}});a(document).ready(function(){AWEContent.Controllers.facebook=new AWEContent.Views.FacebookItemController();AWEContent.Panels.facebook=new AWEContent.Views.FacebookPanel()})})(jQuery);