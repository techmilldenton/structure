(function(a){AWEContent.Views.ColumnPanel=AWEContent.Views.DefaultPanel.extend({className:"awe-obj-panel awe-panel panel-column",panelName:"column",initialize:function(){AWEContent.Views.DefaultPanel.prototype.initialize.call(this)},initPanel:function(){AWEContent.Views.DefaultPanel.prototype.initPanel.call(this);var b=this;a("#text-column-custom-id").change(function(){b.editingModel.get("settings").set("customID",a(this).val())});a("#text-column-custom-classes").change(function(){b.editingModel.get("settings").set("customClass",a(this).val())});a("#column-center-vertical input",b.el).change(function(d,c){if(!c){b.editingModel.get("settings").set("centerVertical",parseInt(a(this).val()))}});a("#column-text-align",b.el).change(function(d,c){b.editingModel.get("settings").set("textAlign",c.value)});a("#column-min-height",this.el).change(function(d,c){b.editingModel.get("settings").set("minHeight",c.value);if(c.value==-1){a(".display-font",a(this)).text("DF")}});a("#column-background-color",b.el).change(function(d,c){if(c){c=c.toRgbString()}else{c=""}b.editingModel.get("settings").set("bgColor",c)});a("#column-background-image input",this.el).change(function(f,d){var g=a(this).val().trim(),e=g?JSON.parse(g):false,c=e&&e.file_url!==undefined?e.file_url:"",h=e&&e.fid!==undefined?e.fid:-1;if(!d){b.editingModel.bgImageURL=c;b.editingModel.get("settings").set("bgFid",h)}if(h<=0){a("#column-background-mode, #column-background-position, #column-parallax-scrolling, .delete-bg-img",b.el).hide()}else{a(".delete-bg-img",b.el).show();a("#column-background-mode",b.el).show().trigger("change",{value:b.editingModel.get("settings").get("bgMode")})}});a("#column-background-mode",b.el).change(function(f,d){var c=d.value,e=a(this).closest(".toggle-drop");if(c=="fullcover"){a("#column-parallax-scrolling, #column-background-position",b.$el).hide()}else{if(c=="parallax"){a("#column-background-position",b.$el).hide();a("#column-parallax-scrolling",b.$el).show()}else{a("#column-background-position",b.$el).show();a("#column-parallax-scrolling",b.$el).hide()}}b.editingModel.get("settings").set("bgMode",d.value)});a("#column-background-position",b.el).change(function(d,c){b.editingModel.get("settings").set("bgPosition",c.value)});a("#column-parallax-scrolling input",b.el).change(function(d,c){if(!c){b.editingModel.get("settings").set("enableScrolling",parseInt(a(this).val()))}});a("#column-background-enable-overlay input",b.el).change(function(d,c){if(parseInt(a(this).val())){a(this).closest(".toggle-enable").next().show()}else{a(this).closest(".toggle-enable").next().hide()}if(!c){b.editingModel.get("settings").set("enabledBgOverlay",parseInt(a(this).val()))}});a("#column-overlay-color",b.el).change(function(d,c){if(c){c=c.toRgbString()}else{c=""}b.editingModel.get("settings").set("bgOverlayColor",c)});a("#column-column-box-model",this.el).initBoxModelPanel(this,"boxModelSettings")},setPanelElementsValue:function(d){var b=this,c=this.editingModel.get("settings").toJSON(),e=c.bgFid?{fid:c.bgFid}:{fid:-1};a("#text-column-custom-id",b.el).val(c.customID);a("#text-column-custom-classes",b.el).val(c.customClass);a("#column-center-vertical input",b.el).val(c.centerVertical).trigger("change",{isPanel:true});a("#column-text-align",b.el).aweSelect("value",c.textAlign);if(!c.enableMinHeight){a("#column-min-height",b.el).hide()}else{a("#column-min-height",b.el).show()}a("#column-min-height .display-font",b.el).text(c.minHeight).trigger("change",{isPanel:true});a("#column-min-height",b.el).aweSlider("value",c.minHeight);a("#column-background-color",b.el).aweColorPicker("value",c.bgColor);a("#column-background-mode",b.el).aweSelect("value",c.bgMode);a("#column-background-position",b.el).aweSelect("value",c.bgPosition);a("#column-background-image .img-bg",b.el).css("background-image","url("+encodeURI(this.editingModel.bgImageURL)+")");a("#column-background-image input",b.el).val(JSON.stringify(e)).trigger("change",true);a("#column-background-enable-overlay input",b.el).val(c.enabledBgOverlay).trigger("change",{isPanel:true});a("#column-overlay-color",b.el).aweColorPicker("value",c.bgOverlayColor);a("#column-column-box-model").initBoxModel(c.boxModelSettings)},buildPanel:function(){return{title:{type:"markup",markup:'<div class="awe-title"><h2>Custom column</h2></div>'},custom_definitions:{type:"section",custom_id:{type:"text_field",title:"ID",attributes:{placeholder:"Custom ID"},default_value:""},custom_classes:{type:"text_field",title:"Classes",attributes:{placeholder:"Custom classes"},default_value:""}},custom_interface:{type:"section",text_align:{type:"select",title:"Align",options:{"text-left":"Left","text-center":"Center","text-right":"Right"},default_value:"col-text-left"},min_height:{type:"slider",title:"Min Height",min_value:-1,max_value:1000,default_value:120,allow_type:true,unit:"px"}},custom_appearances:{type:"section",background_color:{type:"colorpicker",title:"Background color",options:{preferredFormat:"rgb",AlphaVerticle:true,showAlpha:true,allowEmpty:true,showInput:true}},background_image:{type:"media",title:"Background image"},background_mode:{type:"select",title:"Mode",options:{repeat:"Repeat All","repeat-x":"Repeat Horizontally","repeat-y":"Repeat Vertically","no-repeat":"No Repeat",fullcover:"FullCover",parallax:"Parallax"},default_value:"repeat"},background_position:{type:"select",title:"Position",options:{"left top":"Top Left","right top":"Top Right","center top":"Top Center","left center":"Center Left","right center":"Center Right","center center":"Center Center","left bottom":"Bottom Left","right bottom":"Bottom Right","center bottom":"Bottom Center"},default_value:"left top"},parallax_scrolling:{type:"toggle",title:"Parallax scrolling",default_value:0}},background_overlay:{type:"section",background_enable_overlay:{type:"toggle",title:"Enable background overlay",default_value:0},overlay_color:{type:"colorpicker",title:"Overlay color",options:{preferredFormat:"rgb",AlphaVerticle:true,showAlpha:true,allowEmpty:true,showInput:true}}},custom_box_model:{type:"section",column_box_model:{type:"tabs",tabs:[{tab_title:"Border",contents:{custom_border:{type:"box_border",min_value:0,max_value:100,default_value:0}}},{tab_title:"Radius",contents:{custom_border_radius:{type:"box_model",model_type:"border_radius",allow_type:true,min_value:0,max_value:100,default_value:0}}},{tab_title:"Padding",contents:{custom_padding:{type:"box_model",model_type:"padding",allow_type:true,min_value:0,max_value:100,default_value:0}}},{tab_title:"Margin",contents:{custom_margin:{type:"box_model",model_type:"margin",allow_type:true,min_value:0,max_value:100,default_value:0}}}]}}}}})})(jQuery);