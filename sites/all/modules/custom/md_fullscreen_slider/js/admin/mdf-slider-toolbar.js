!function(t){function e(t){var e=t.toString().split(" ");return 3==e.length}var o={100:"Thin","100italic":"Thin Italic",200:"Extra Light","200italic":"Extra Light Italic",300:"Light","300italic":"Light Italic",400:"Normal","400italic":"Italic",500:"Medium","500italic":"Medium Italic",600:"Semi Bold","600italic":"Semi Bold Italic",700:"Bold","700italic":"Bold Italic",800:"Extra Bold","800italic":"Extra Bold Italic",900:"Heavy","900italic":"Heavy Italic"};MegaSlider.Toolbar=function(t){this.panel=t},MegaSlider.Toolbar.prototype={constructor:MegaSlider.Toolbar,init:function(){function e(){var e=t("#mdt-opacity-slider").slider("value");t("#mdt-opacity").val(e/100).trigger("change")}function o(){var e=t(this).slider("value");t("input",this).val(e).trigger("change")}var a=this;t("#mdf-toolbar").tinyscrollbar(),t("#mdf-toolbar .box-toolbar h3").click(function(){var e=t(this).next(".box-content");e.is(":visible")?e.slideUp(function(){t("#mdf-toolbar").tinyscrollbar_update("relative")}):e.slideDown(function(){t("#mdf-toolbar").tinyscrollbar_update("relative")})}),t("#mdf-toolbar .add-new-object a").click(function(){return t(this).hasClass("btn-text")?a.panel.addBoxItem("text"):t(this).hasClass("btn-image")?(a.panel.addBoxItem("image"),t("#mdf-toolbar .mdt-proportions").trigger("click")):t(this).hasClass("btn-video")&&(a.panel.addBoxItem("video"),t("#mdf-toolbar .mdt-proportions").trigger("click")),!1}),t("#mdf-toolbar textarea.mdt-texttitle").keyup(function(){a.panel.setItemTitle(t(this).val())}),t("#mdf-toolbar input.mdt-alt-image").keyup(function(){a.panel.setItemTitle(t(this).val())}),t("#mdf-toolbar #mdf-edit-image").click(function(){new MdImagePopup({onSubmit:function(e,o){a.panel.setItemImageSrc(o.fileid,e,o.name),t("#mdf-toolbar input.mdt-alt-image").val(o.name)}});return!1}),t("#mdt-opacity-slider").slider({min:0,max:100,value:100,slide:e,change:e}),t("#mdf-toolbar input.mdt-color").spectrum({clickoutFiresChange:!0,showInput:!0,preferredFormat:"hex6",move:function(e){t(this).val(e.toHexString()).trigger("change")}}),t("#mdf-toolbar input.mdt-background-color").spectrum({clickoutFiresChange:!0,showAlpha:!0,showInput:!0,preferredFormat:"rgb",move:function(e){t(this).val(e.toRgbString()).trigger("change")}}),t("#checkbox-padding").bind("change",function(){t(this).is(":checked")?(t("#padding-content").slideDown(function(){t("#mdf-toolbar").tinyscrollbar_update("relative")}),a.panel.setPadding(1)):(t("#padding-content").slideUp(function(){t("#mdf-toolbar").tinyscrollbar_update("relative")}),a.panel.setPadding(0))}),t("#checkbox-border").bind("change",function(){t(this).is(":checked")?(t("#border-content").slideDown(function(){t("#mdf-toolbar").tinyscrollbar_update("relative")}),a.panel.setBorder(1)):(t("#border-content").slideUp(function(){t("#mdf-toolbar").tinyscrollbar_update("relative")}),a.panel.setBorder(0))}),t("#border-content").mdPanelBorder({changeAllBorder:function(t){a.panel.setItemBorder("all",t)},changeLeftBorder:function(t){a.panel.setItemBorder("left",t)},changeTopBorder:function(t){a.panel.setItemBorder("top",t)},changeRightBorder:function(t){a.panel.setItemBorder("right",t)},changeBottomBorder:function(t){a.panel.setItemBorder("bottom",t)}}),t("#mdf-toolbar input.mdt-width").keyup(function(){var e=t("#mdf-toolbar a.mdt-proportions");if(e.hasClass("active")){var o=e.data("proportions");o>0&&t("#mdf-toolbar input.mdt-height").val(Math.round(t(this).val()/o))}}),t("#mdf-toolbar input.mdt-height").keyup(function(){var e=t("#mdf-toolbar a.mdt-proportions");if(e.hasClass("active")){var o=e.data("proportions");o>0&&t("#mdf-toolbar input.mdt-width").val(Math.round(t(this).val()*o))}}),t("#mdf-toolbar .mdt-proportions").click(function(){if(t(this).hasClass("active"))t(this).removeClass("active");else{var e=t("#mdf-toolbar input.mdt-width").val(),o=t("#mdf-toolbar input.mdt-height").val(),a=1;e>0&&o>0&&(a=e/o),t(this).data("proportions",a),t(this).addClass("active")}}),t("#checkbox-drop-shadow").bind("change",function(){t(this).is(":checked")?(t("#shadow-content").slideDown(function(){t("#mdf-toolbar").tinyscrollbar_update("relative")}),a.panel.setShadow(1)):(t("#shadow-content").slideUp(function(){t("#mdf-toolbar").tinyscrollbar_update("relative")}),a.panel.setShadow(0))}),t("#mdf-toolbar input.shadow-angle").knob({change:function(e){t("#mdf-toolbar input.shadow-angle").trigger("change")}}),t("#mdf-toolbar #mdt-shadow-blur, #mdf-toolbar #mdt-shadow-offset").slider({min:0,max:50,value:0,slide:o,change:o}),t("#mdf-toolbar input.shadow-color").spectrum({clickoutFiresChange:!0,preferredFormat:"hex6",showInput:!0,move:function(e){t(this).val(e.toHexString()).trigger("change")}}),t("#mdf-toolbar select.mdt-font-family").change(function(){a.panel.changeFontFamily(t(this).val()),a.changeFontWeightOption(t("option:selected",this).data("fontweight"))}),t("#mdf-toolbar select.mdt-font-family").bind("updatevalue",function(){a.changeFontWeightOption(t("option:selected",this).data("fontweight"))}),t("input.mdt-link-color, input.mdt-link-brcolor, input.mdt-link-bgcolor","#mdf-toolbar").spectrum({clickoutFiresChange:!0,showInput:!0,showAlpha:!0,preferredFormat:"rgb",move:function(e){t(this).val(e.toRgbString()).trigger("change")}}),t("#dlg-video").dialog({resizable:!1,autoOpen:!1,draggable:!1,modal:!0,width:680,buttons:{OK:function(){a.panel.setVideoData(t("#video-id").val(),t("#video-name").val(),t("#video-thumb").attr("src"),t("#video-thumb-id").val()),t(this).dialog("close")}},open:function(){if(null!=a.selectedItem){var e=a.selectedItem.getItemValues();t("#video-url").val(""),t("#video-id").val(e.fileid),t("#video-name").val(e.title),t("#video-thumb-id").val(e.thumbid),t("#video-thumb").attr("src",e.thumb)}},close:function(){}}),t("#mdf-edit-video").click(function(){return t("#dlg-video").dialog("open"),!1}),t("#videothumb-pick").click(function(){new MdImagePopup({onSubmit:function(e,o){t("#video-thumb").attr("src",e),t("#video-thumb-id").val(o.fileid)}});return!1}),t("#video-search").click(function(){var e=t("#video-url").val();return new submitVideo(e,function(e){console.log(e),t("#video-id").val(e.id),t("#video-name").val(e.title),t("#video-thumb").attr("src",e.thumb)}),!1}),t("#mdf-toolbar .mdt-input").change(function(){var e=t(this).attr("name");switch(e){case"width":case"height":a.panel.setItemSize(t("#mdf-toolbar input.mdt-width").val(),t("#mdf-toolbar input.mdt-height").val());break;case"left":case"top":a.panel.setItemAttribute(e,t(this).val());break;case"startani":case"stopani":case"startaniTime":case"stopaniTime":a.panel.setItemData(e,t(this).val());break;case"color":case"backgroundColor":case"opacity":a.panel.setItemCss(e,t(this).val());break;case"paddingTop":case"paddingBottom":case"paddingRight":case"paddingLeft":case"borderTopLeftRadius":case"borderTopRightRadius":case"borderBottomRightRadius":case"borderBottomLeftRadius":a.panel.setItemCssPx(e,t(this).val());break;case"fontWeight":a.panel.setItemFontWeight(t(this).val());break;case"fontSize":case"lineHeight":a.panel.setItemCssPx(e,t(this).val());break;case"link":case"linkColor":case"linkBorderColor":case"linkBackgroundColor":case"linkTarget":case"linkCustomClass":case"customClass":case"customCss":a.panel.setItemData(e,t(this).val());break;case"shadowAngle":case"shadowOffset":case"shadowBlur":case"shadowColor":a.panel.setItemShadow(e,t(this).val());break;default:a.panel.setItemCss(e,t(this).val())}return!1}),t("#mdf-toolbar a.button-style").click(function(){return t(this).hasClass("active")?(a.panel.setItemCss(t(this).attr("name"),t(this).attr("normal")),t(this).removeClass("active")):(a.panel.setItemCss(t(this).attr("name"),t(this).attr("active")),t(this).addClass("active")),!1}),t("#mdf-toolbar a.button-align").click(function(){if(t(this).hasClass("active")){if(t(this).hasClass("mdt-left-alignment"))return;a.panel.setItemCss("textAlign","left"),t("#mdf-toolbar a.mdt-left-alignment").addClass("active"),t(this).removeClass("active")}else a.panel.setItemCss("textAlign",t(this).attr("value")),t("#mdf-toolbar a.button-align").removeClass("active"),t(this).addClass("active");return!1}),t("#mdf-toolbar a.mdt-btn-align").click(function(){return t(this).hasClass("mdt-align-left")?a.panel.alignLeftSelectedBox():t(this).hasClass("mdt-align-right")?a.panel.alignRightSelectedBox():t(this).hasClass("mdt-align-center")?a.panel.alignCenterSelectedBox():t(this).hasClass("mdt-align-top")?a.panel.alignTopSelectedBox():t(this).hasClass("mdt-align-bottom")?a.panel.alignBottomSelectedBox():t(this).hasClass("mdt-align-vcenter")&&a.panel.alignMiddleSelectedBox(),!1}),t("#mdf-toolbar a.mdt-btn-space").click(function(){return t(this).hasClass("mdt-spacev")?a.panel.spaceVertical(t("input.mdt-spacei","#mdf-toolbar").val()):t(this).hasClass("mdt-spaceh")&&a.panel.spaceHorizontal(t("input.mdt-spacei","#mdf-toolbar").val()),!1}),this.hideToolbar(),t("#mdf-toolbar").tinyscrollbar_update("relative")},changeSelectItem:function(t,e){this.selectedItem=t,this.triggerChangeSelectItem(e)},triggerChangeSelectItem:function(e){e?this.showToolbarMultiSelect():null==this.selectedItem?this.hideToolbar():this.changeToolbarValue(),setTimeout(function(){t("#mdf-toolbar").tinyscrollbar_update("relative")},450)},showToolbarMultiSelect:function(){t("#mdf-toolbar .box-item:not(.box-align)").hide(),t("#mdf-toolbar .box-item.box-align").slideDown()},hideToolbar:function(){t("#mdf-toolbar .box-item").hide()},changeToolbarValue:function(){if(null!=this.selectedItem){var o=this.selectedItem.getItemValues();t("#mdf-toolbar input.mdt-width").val(o.width),t("#mdf-toolbar input.mdt-height").val(o.height),t("#mdf-toolbar .mdt-proportions").trigger("click"),t("#mdf-toolbar input.mdt-left").val(o.left),t("#mdf-toolbar input.mdt-top").val(o.top),t("#mdf-toolbar select.mdt-startani").val(o.startani),t("#mdf-toolbar select.mdt-stopani").val(o.stopani),t("#mdf-toolbar input.mdt-startani-time").val(o.startaniTime),t("#mdf-toolbar input.mdt-stopani-time").val(o.stopaniTime),t("#mdf-toolbar input.mdt-color").spectrum("set",o.color),t("#mdf-toolbar input.mdt-background-color").spectrum("set",o.backgroundColor),o.opacity?(t("#mdf-toolbar #mdt-opacity-slider").slider("value",100*o.opacity),t("#mdf-toolbar input.mdt-opacity").val(o.opacity)):(t("#mdf-toolbar #mdt-opacity-slider").slider("value",100),t("#mdf-toolbar input.mdt-opacity").val(100)),t("#mdf-toolbar input.mdt-p-top").val(o.paddingTop),t("#mdf-toolbar input.mdt-p-right").val(o.paddingRight),t("#mdf-toolbar input.mdt-p-bottom").val(o.paddingBottom),t("#mdf-toolbar input.mdt-p-left").val(o.paddingLeft),o.padding?t("#checkbox-padding").prop("checked",!0).trigger("change"):t("#checkbox-padding").prop("checked",!1).trigger("change"),t("#mdf-toolbar input.mdt-border-width").val(""),t("#mdf-toolbar select.mdt-border-style").val(""),t("#mdf-toolbar input.border-color").spectrum("set",""),t("#border-position a.bp-border").removeClass("active selected"),t("#border-position a.bp-all").attr("attr-border",o.borderAll).toggleClass("active",e(o.borderAll)),t("#border-position a.bp-top").attr("attr-border",o.borderTop).toggleClass("active",e(o.borderTop)),t("#border-position a.bp-right").attr("attr-border",o.borderRight).toggleClass("active",e(o.borderRight)),t("#border-position a.bp-bottom").attr("attr-border",o.borderBottom).toggleClass("active",e(o.borderBottom)),t("#border-position a.bp-left").attr("attr-border",o.borderLeft).toggleClass("active",e(o.borderLeft)),o.border?t("#checkbox-border").prop("checked",!0).trigger("change"):t("#checkbox-border").prop("checked",!1).trigger("change"),t("#mdf-toolbar input.mdt-br-topleft").val(o.borderTopLeftRadius),t("#mdf-toolbar input.mdt-br-topright").val(o.borderTopRightRadius),t("#mdf-toolbar input.mdt-br-bottomleft").val(o.borderBottomRightRadius),t("#mdf-toolbar input.mdt-br-bottomright").val(o.borderBottomLeftRadius),t("#shadow-content input.shadow-angle").val(o.shadowAngle).trigger("change"),t("#mdf-toolbar #mdt-shadow-offset").slider("value",o.shadowOffset||0),t("#mdf-toolbar #mdt-shadow-blur").slider("value",o.shadowBlur||0),t("#mdf-toolbar input.shadow-offset").val(o.shadowOffset),t("#mdf-toolbar input.shadow-blur").val(o.shadowBlur),t("#shadow-content input.shadow-color").spectrum("set",o.shadowColor),o.shadow?t("#checkbox-drop-shadow").prop("checked",!0).trigger("change"):t("#checkbox-drop-shadow").prop("checked",!1).trigger("change"),t("#mdf-toolbar input.mdt-link-value").val(o.link),t("#mdf-toolbar input.mdt-link-color").spectrum("set",o.linkColor),t("#mdf-toolbar input.mdt-link-brcolor").spectrum("set",o.linkBorderColor),t("#mdf-toolbar input.mdt-link-bgcolor").spectrum("set",o.linkBackgroundColor),t("#mdf-toolbar select.mdt-link-target").val(o.linkTarget),t("#mdf-toolbar input.mdt-link-custom-class").val(o.linkCustomClass),t("#mdf-toolbar input.mdt-customclass").val(o.customClass),t("#mdf-toolbar input.mdt-customcss").val(o.customCss),"text"==o.type?(t("#mdf-toolbar textarea.mdt-texttitle").val(o.title),t("#mdf-toolbar .box-item.box-text").slideDown(),t("#mdf-toolbar .box-item:not(.box-text)").hide(),t("#mdf-toolbar select.mdt-font-family").val(o.fontFamily).trigger("updatevalue"),t("#mdf-toolbar select.mdt-font-weight").val(o.fontWeight),t("#mdf-toolbar input.mdt-fontsize").val(o.fontSize),t("#mdf-toolbar input.mdt-lineheight").val(o.lineHeight),t("#mdf-toolbar a.mdt-font-bold").toggleClass("active","bold"==o.fontWeight),t("#mdf-toolbar a.mdt-font-italic").toggleClass("active","italic"==o.fontStyle),t("#mdf-toolbar a.mdt-font-underline").toggleClass("active","underline"==o.textDecoration),t("#mdf-toolbar a.mdt-font-allcaps").toggleClass("active","uppercase"==o.textTransform),t("#mdf-toolbar a.mdt-left-alignment").toggleClass("active","left"==o.textAlign),t("#mdf-toolbar a.mdt-center-alignment").toggleClass("active","center"==o.textAlign),t("#mdf-toolbar a.mdt-right-alignment").toggleClass("active","right"==o.textAlign),t("#mdf-toolbar a.mdt-justified-alignment").toggleClass("active","justified"==o.textAlign)):"image"==o.type?(t("#mdf-toolbar input.mdt-alt-image").val(o.title),t("#mdf-toolbar .box-item.box-image").slideDown(),t("#mdf-toolbar .box-item:not(.box-image)").hide()):"video"==o.type&&(t("textarea.mdt-videoname","#mdf-toolbar").val(o.title),t("input.mdt-video-fileid","#mdf-toolbar").val(o.fileid),t("img.mdt-videosrc","#mdf-toolbar").attr("src",o.thumb),t("#mdf-toolbar .box-item.box-video").slideDown(),t("#mdf-toolbar .box-item:not(.box-video)").hide())}},changePositionValue:function(e,o){t("input.mdt-left","#mdf-toolbar").val(Math.round(e)),t("input.mdt-top","#mdf-toolbar").val(Math.round(o))},changeSizeValue:function(e,o){t("input.mdt-width","#mdf-toolbar").val(Math.round(e)),t("input.mdt-height","#mdf-toolbar").val(Math.round(o))},changeTimelineValue:function(){null!=this.selectedItem&&(t("input.mdt-starttime","#mdf-toolbar").val(Math.round(this.selectedItem.data("starttime"))),t("input.mdt-stoptime","#mdf-toolbar").val(Math.round(this.selectedItem.data("stoptime"))))},changeFontWeightOption:function(e){var a='<option value=""></option>',i=t("#mdf-toolbar select.mdt-font-weight").data("value");if(e)for(var l=e.split(","),r=0;r<l.length;r++){var d=l[r].replace(/^\s+|\s+$/g,"");a+='<option value="'+d+'">'+o[d]+"</option>"}t("#mdf-toolbar select.mdt-font-weight").html(a).val(i)},focusEdit:function(){if(null!=this.selectedItem){var e=this.selectedItem.data("type");"text"==e?t("textarea.mdt-textvalue","#mdf-toolbar").focus():"image"==e?t("#mdf-edit-image").trigger("click"):"video"==e&&t("#mdf-edit-video").trigger("click")}},changePositionLeft:function(e){t("#mdf-toolbar input.mdt-left").val(Math.round(e))},changePositionTop:function(e){t("#mdf-toolbar input.mdt-top").val(Math.round(e))}}}(jQuery);